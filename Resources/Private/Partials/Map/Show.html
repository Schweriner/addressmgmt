{namespace u = Undkonsorten\Addressmgmt\ViewHelpers}
<div class="map-wrap" id="map{contendUid}-wrap">
<div class="map" id="map{contendUid}" data-map-info-layer="#map{contendUid}-info-layer" data-map-wrap="#map{contendUid}-wrap" data-is-map="true" data-poi-list="#map{contendUid}-items" 
data-map-configuration='{u:mapConfiguration(latitude:"{settings.latitude}",longitude:"{settings.longitude}", zoom:"{settings.mapZoom}", padding:"40")}'
data-map-tilelayer='{u:mapBoxTileLayer(id:"{settings.mapId}", accesssToken:"{settings.accessToken}",maxZoom:"{settings.maxZoom}")}'>
</div>
<div class="map-info-layer" id="map{contendUid}-info-layer"></div>
<ul id="map{contendUid}-items" style="display:none">
	<f:for each="{addresses}" as="address">
		<f:if condition="{address.latitude}">
			<f:then>
				<li data-poi="{u:format.json(additionalAttributes:{type:'marker',coordinates:{0:address.latitude,1:address.longitude}}) -> f:format.htmlspecialchars()}">
					<h4 class="title">{address.name}</h4>
					<p class="description">{address.description}</p>
				</li>
			</f:then>
			<f:else>
				<f:if condition="{address.geoJson}">
					<li data-poi="{u:format.json(additionalAttributes:{type:'geoJson',geoJson:address.geoJsonObject}) -> f:format.htmlspecialchars()}">
						<h4 class="title">{address.name}</h4>
						<p class="description">{address.description}</p>
					</li>
				</f:if>
			</f:else>
		</f:if>

	</f:for>
</ul>
